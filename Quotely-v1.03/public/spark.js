class ClickSparkManager{constructor(){if(ClickSparkManager.instance)return ClickSparkManager.instance;this.sparks=[],this.animationId=null,this.canvas=null,this.ctx=null,this.initCanvas(),this.startAnimation(),ClickSparkManager.instance=this}initCanvas(){this.canvas=document.createElement("canvas"),this.canvas.id="click-spark-canvas",this.canvas.style.cssText=`
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 9999;
`,this.ctx=this.canvas.getContext("2d"),this.resizeCanvas(),document.body.appendChild(this.canvas),window.addEventListener("resize",()=>this.resizeCanvas())}resizeCanvas(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}easeFunc(t,a){switch(a){case"linear":return t;case"ease-in":return t*t;case"ease-in-out":return t<.5?2*t*t:-1+(4-2*t)*t;default:return t*(2-t)}}addSpark(t,a,e,i=null){let{sparkColor:n="#fff",sparkSize:s=10,sparkRadius:r=15,sparkCount:l=8,duration:c=400,easing:h="ease-out",extraScale:o=1}=e,d=performance.now(),g=Array.from({length:l},(e,g)=>({buttonElement:i,initialX:t,initialY:a,angle:2*Math.PI*g/l,startTime:d,sparkColor:n,sparkSize:s,sparkRadius:r,duration:c,easing:h,extraScale:o}));this.sparks.push(...g)}draw(t){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.sparks=this.sparks.filter(a=>{let e=t-a.startTime;if(e>=a.duration)return!1;let i=a.initialX,n=a.initialY;if(a.buttonElement){let s=a.buttonElement.getBoundingClientRect();i=s.left+s.width/2,n=s.top+s.height/2}let r=e/a.duration,l=this.easeFunc(r,a.easing),c=l*a.sparkRadius*a.extraScale,h=a.sparkSize*(1-l),o=i+c*Math.cos(a.angle),d=n+c*Math.sin(a.angle),g=i+(c+h)*Math.cos(a.angle),k=n+(c+h)*Math.sin(a.angle);return this.ctx.strokeStyle=a.sparkColor,this.ctx.lineWidth=2,this.ctx.beginPath(),this.ctx.moveTo(o,d),this.ctx.lineTo(g,k),this.ctx.stroke(),!0})}startAnimation(){let t=a=>{this.draw(a),this.animationId=requestAnimationFrame(t)};this.animationId=requestAnimationFrame(t)}}let globalSparkManager=null;function getSparkManager(){return globalSparkManager||(globalSparkManager=new ClickSparkManager),globalSparkManager}function ClickSpark(t){let{children:a,sparkColor:e="#fff",sparkSize:i=10,sparkRadius:n=15,sparkCount:s=8,duration:r=400,easing:l="ease-out",extraScale:c=1}=t;if(!a)return null;let h={sparkColor:e,sparkSize:i,sparkRadius:n,sparkCount:s,duration:r,easing:l,extraScale:c};if(a&&a.nodeType===Node.ELEMENT_NODE){let o=a;return o.addEventListener("click",t=>{let a=o.getBoundingClientRect(),e=a.left+a.width/2,i=a.top+a.height/2,n=getSparkManager();n.addSpark(e,i,h,o)}),o}return Array.isArray(a)&&a.forEach(t=>{t&&t.nodeType===Node.ELEMENT_NODE&&t.addEventListener("click",a=>{let e=t.getBoundingClientRect(),i=e.left+e.width/2,n=e.top+e.height/2,s=getSparkManager();s.addSpark(i,n,h,t)})}),a}window.ClickSpark=ClickSpark;